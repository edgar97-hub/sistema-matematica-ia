(()=>{var e={};e.id=467,e.ids=[467],e.modules={1418:(e,r,t)=>{"use strict";t.d(r,{h:()=>g});var s=t(60687),a=t(3833);t(43210);var i=t(22650),o=t(15048),n=t(44968),l=t(62754),d=t(25800),u=t(46198),c=t(63090),p=t(24351),m={root:"m_9814e45f"};let h={zIndex:(0,i.I)("modal")},x=(0,n.V)((e,{gradient:r,color:t,backgroundOpacity:s,blur:i,radius:n,zIndex:d})=>({root:{"--overlay-bg":r||(void 0!==t||void 0!==s)&&(0,l.B)(t||"#000",s??.6)||void 0,"--overlay-filter":i?`blur(${(0,a.D)(i)})`:void 0,"--overlay-radius":void 0===n?void 0:(0,o.nJ)(n),"--overlay-z-index":d?.toString()}})),g=(0,p.v)((e,r)=>{let t=(0,d.Y)("Overlay",h,e),{classNames:a,className:i,style:o,styles:n,unstyled:l,vars:p,fixed:g,center:v,children:y,radius:b,zIndex:f,gradient:j,blur:w,color:A,backgroundOpacity:P,mod:_,...q}=t,E=(0,u.I)({name:"Overlay",props:t,classes:m,className:i,style:o,classNames:a,styles:n,unstyled:l,vars:p,varsResolver:x});return(0,s.jsx)(c.a,{ref:r,...E("root"),mod:[{center:v,fixed:g},_],...q,children:y})});g.classes=m,g.displayName="@mantine/core/Overlay"},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6001:(e,r,t)=>{"use strict";t.d(r,{X:()=>a});var s=t(12234);let a={async getUsers(e){let r={};return r.page=e.pagination.pageIndex+1,r.limit=e.pagination.pageSize,e.sorting&&e.sorting.length>0&&(r.sortField=e.sorting[0].id,r.sortDirection=e.sorting[0].desc?"DESC":"ASC"),e.columnFilters&&e.columnFilters.length>0&&e.columnFilters.forEach(e=>{void 0!==e.value&&""!==e.value&&null!==e.value&&(r[e.id]=e.value)}),(await s.u.get("/users",{params:r})).data},async deactivateUser(e){await s.u.delete(`/users/${e}`)},async activateUser(e){await s.u.delete(`/users/${e}`)},async getUserById(e){if(console.log(`PWAUSER_SERVICE: Attempting to fetch user with ID: ${e}`),!e)return console.error("PWAUSER_SERVICE: getUserById called with no ID."),Promise.reject(Error("User ID is required"));try{let r=await s.u.get(`/users/${e}`);return console.log(`PWAUSER_SERVICE: Data received for ${e}:`,r.data),r.data}catch(r){throw console.error(`PWAUSER_SERVICE: Error fetching user ${e}:`,r),r}},async updateUser(e,r){let{email:t,...a}=r;return(await s.u.patch(`/users/${e}`,a)).data}}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11593:(e,r,t)=>{"use strict";t.d(r,{p:()=>v});var s=t(60687);t(43210);var a=t(22650),i=t(44968),o=t(28757),n=t(25800),l=t(46198),d=t(63090),u=t(44176),c=t(6099),p=t(1418),m=t(48592),h={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};let x={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:(0,a.I)("overlay")},g=(0,i.V)((e,{zIndex:r})=>({root:{"--lo-z-index":r?.toString()}})),v=(0,u.P9)((e,r)=>{let t=(0,n.Y)("LoadingOverlay",x,e),{classNames:a,className:i,style:u,styles:v,unstyled:y,vars:b,transitionProps:f,loaderProps:j,overlayProps:w,visible:A,zIndex:P,..._}=t,q=(0,o.xd)(),E=(0,l.I)({name:"LoadingOverlay",classes:h,props:t,className:i,style:u,classNames:a,styles:v,unstyled:y,vars:b,varsResolver:g}),I={...x.overlayProps,...w};return(0,s.jsx)(m.e,{transition:"fade",...f,mounted:!!A,children:e=>(0,s.jsxs)(d.a,{...E("root",{style:e}),ref:r,..._,children:[(0,s.jsx)(c.a,{...E("loader"),unstyled:y,...j}),(0,s.jsx)(p.h,{...I,...E("overlay"),darkHidden:!0,unstyled:y,color:w?.color||q.white}),(0,s.jsx)(p.h,{...I,...E("overlay"),lightHidden:!0,unstyled:y,color:w?.color||q.colors.dark[5]})]})})});v.classes=h,v.displayName="@mantine/core/LoadingOverlay"},12234:(e,r,t)=>{"use strict";t.d(r,{u:()=>i});var s=t(51060),a=t(50894);let i=s.A.create({baseURL:"http://161.132.41.184:3000/api"});i.interceptors.request.use(e=>{let r=a.n.getState().token;return r&&(e.headers.Authorization=`Bearer ${r}`),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,e=>(e.response&&e.response.status,Promise.reject(e)))},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},37310:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>D});var s=t(60687),a=t(43210),i=t(16189),o=t(63090),n=t(11593),l=t(16537),d=t(88767),u=t(99445),c=t(23376),p=t(3802),m=t(58793),h=t(84349),x=t(47703),g=t(8693),v=t(51423),y=t(54050),b=t(47874),f=t(6001),j=t(91541),w=t(71879),A=t(86906),P=t(96193),_=t(38339),q=t(9275);let E=q.z.object({name:q.z.string().min(1,{message:"El nombre es requerido"}),email:q.z.string().email({message:"Correo inv\xe1lido"}),countryOfOrigin:q.z.string().nullable().optional(),credits:q.z.number().min(0,{message:"Cr\xe9ditos no pueden ser negativos"}),isActive:q.z.boolean()});function I({initialData:e,onSubmit:r,isSaving:t,onCancel:a}){let i=(0,P.m)({initialValues:e||{name:"",email:"",countryOfOrigin:null,credits:0,isActive:!0},validate:(0,_.u)(E)});return(0,s.jsxs)("form",{onSubmit:i.onSubmit(e=>r(e)),children:[(0,s.jsx)(j.k,{label:"Nombre Completo",placeholder:"Nombre del usuario",required:!0,...i.getInputProps("name"),mb:"md"}),(0,s.jsx)(j.k,{label:"Correo Electr\xf3nico",disabled:!0,...i.getInputProps("email"),mb:"md"}),(0,s.jsx)(j.k,{label:"Pa\xeds de Origen",placeholder:"Pa\xeds",...i.getInputProps("countryOfOrigin"),mb:"md"}),(0,s.jsx)(w.Q,{label:"Cr\xe9ditos",placeholder:"Saldo de cr\xe9ditos",required:!0,min:0,...i.getInputProps("credits"),mb:"md"}),(0,s.jsx)(A.S,{label:"Usuario Activo",...i.getInputProps("isActive",{type:"checkbox"}),mt:"md",mb:"xl"}),(0,s.jsxs)(u.Y,{justify:"flex-end",children:[(0,s.jsx)(p.$,{variant:"default",onClick:a,disabled:t,children:"Cancelar"}),(0,s.jsx)(p.$,{type:"submit",loading:t,disabled:!i.isDirty()&&!t,children:e?"Actualizar Usuario":"Guardar Usuario"})]})]})}function D(){let[e,r]=(0,a.useState)(null),t=(0,i.useRouter)(),j=(0,i.useParams)().id,w=(0,g.jE)(),{data:A,isLoading:P,isError:_,error:q,refetch:E}=(0,v.I)({queryKey:["pwa-users",j],queryFn:()=>f.X.getUserById(j),enabled:!!j,staleTime:3e5}),{mutateAsync:D}=(0,y.n)({mutationFn:e=>f.X.updateUser(j,e),onSuccess:e=>{b.$e.show({title:"Paquete Actualizado",message:`El paquete "${e.name}" ha sido actualizado exitosamente.`,color:"green",icon:(0,s.jsx)(m.A,{size:18})}),w.invalidateQueries({queryKey:["pwa-users"]}),w.setQueryData(["pwa-users",j],e),t.push("/admin/users-pwa")},onError:e=>{b.$e.show({title:"Error al Actualizar",message:e.message||"No se pudo actualizar el paquete de cr\xe9dito.",color:"red",icon:(0,s.jsx)(h.A,{size:18})})}}),S=async e=>{await D(e)};return(console.log("user",A),P)?(0,s.jsxs)(o.a,{p:"lg",children:[(0,s.jsx)(n.p,{visible:!0}),(0,s.jsx)(l.E,{children:"Cargando datos del usuario..."})]}):_||!A?(0,s.jsx)(o.a,{p:"lg",children:(0,s.jsxs)(d.F,{icon:(0,s.jsx)(h.A,{size:"1rem"}),title:"Error",color:"red",withCloseButton:!0,onClose:()=>t.push("/admin/users-pwa"),children:["No se pudieron cargar los datos del usuario o el usuario no existe. Error: ",q?.message]})}):(0,s.jsxs)(o.a,{p:"lg",children:[(0,s.jsxs)(u.Y,{justify:"space-between",mb:"xl",children:[(0,s.jsxs)(c.h,{order:2,children:["Editar Usuario PWA: ",A?.name]}),(0,s.jsx)(p.$,{component:"a",onClick:()=>t.push("/admin/users-pwa"),variant:"default",leftSection:(0,s.jsx)(x.A,{size:16}),children:"Volver a la Lista"})]}),e&&(0,s.jsx)(I,{initialData:e,onSubmit:S,isSaving:!1,onCancel:()=>t.push("/admin/users-pwa")})]})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},58793:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});var s=(0,t(6445).A)("outline","device-floppy","IconDeviceFloppy",[["path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M14 4l0 4l-6 0l0 -4",key:"svg-2"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67013:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-pwa/src/app/(admin_panel)/admin/users-pwa/edit/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-pwa/src/app/(admin_panel)/admin/users-pwa/edit/[id]/page.tsx","default")},67649:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>d});var s=t(65239),a=t(48088),i=t(88170),o=t.n(i),n=t(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(r,l);let d={children:["",{children:["(admin_panel)",{children:["admin",{children:["users-pwa",{children:["edit",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,67013)),"/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-pwa/src/app/(admin_panel)/admin/users-pwa/edit/[id]/page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,36201)),"/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-pwa/src/app/(admin_panel)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-pwa/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,u=["/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-pwa/src/app/(admin_panel)/admin/users-pwa/edit/[id]/page.tsx"],c={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(admin_panel)/admin/users-pwa/edit/[id]/page",pathname:"/admin/users-pwa/edit/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81265:(e,r,t)=>{Promise.resolve().then(t.bind(t,67013))},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},87889:(e,r,t)=>{Promise.resolve().then(t.bind(t,37310))},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[679,808,260,60,191,673,520,702,844,851],()=>t(67649));module.exports=s})();