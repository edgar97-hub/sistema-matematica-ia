(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[567],{309:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>G});var s=n(5155),i=n(7017),a=n(6715),r=n(4409),l=n(112),o=n(9967),c=n(8887),d=n(6707),h=n(6568),m=n(1681),u=n(6874),g=n.n(u),p=n(9018),v=n(1005),x=n(3191),k=n(8185),b=n(2405);function f(){let{theme:e,setTheme:t,toggleTheme:n}=p.n.getState();return(0,s.jsx)(v.m,{label:"dark"===e?"Cambiar a tema claro":"Cambiar a tema oscuro",position:"bottom",withArrow:!0,children:(0,s.jsx)(x.M,{onClick:()=>n(),variant:"default",size:"lg","aria-label":"Toggle color scheme",children:"dark"===e?(0,s.jsx)(k.A,{size:20,stroke:1.5}):(0,s.jsx)(b.A,{size:20,stroke:1.5})})})}var j=n(6593),A=n(1603),_=n(876);let I=[{href:"/admin/users-pwa",label:"Usuarios (Clientes)",icon:A.A},{href:"/admin/settings",label:"Configuraci\xf3n",icon:_.A},{href:"/admin/credit-packages",label:"Paquetes de Cr\xe9dito",icon:_.A}];var C=n(2115),N=n(5695),S=n(5049),L=n(8104),w=n(3608),E=n(9385),z=n(9246),T=n(9318),O=n(5018),y=n.n(O);function R(e){var t,n;let{item:i,isSubItem:a=!1,onLinkClick:r}=e,o=(0,N.usePathname)(),d=()=>{var e;return(null==(e=i.subItems)?void 0:e.some(e=>e.href&&o.startsWith(e.href)))||!1},[h,m]=(0,C.useState)(d());(0,C.useEffect)(()=>{m(d())},[o,i.subItems]);let u=i.subItems&&i.subItems.length>0,p=e=>{u?(e.preventDefault(),m(e=>!e)):i.href&&r&&r()},v=i.href&&o===i.href,x=i.icon,k=(0,s.jsxs)(l.Y,{wrap:"nowrap",gap:"xs",className:y().linkContent,children:[(0,s.jsx)(S.L,{variant:v||h&&u?"light":"transparent",color:v||h&&u?"blue":"gray",size:30,children:(0,s.jsx)(x,{size:18,stroke:1.5})}),(0,s.jsx)(c.E,{size:"sm",fw:v?600:400,className:y().linkLabel,children:i.label}),u&&(0,s.jsx)(L.a,{component:h?z.A:T.A,ml:"auto",size:16,stroke:1.5,className:y().chevron})]});return i.href?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.N,{component:g(),href:i.href,onClick:p,className:"".concat(y().navLink," ").concat(v?y().active:""," ").concat(a?y().subItem:""),children:k}),u&&(0,s.jsx)(E.S,{in:h,transitionDuration:200,children:(0,s.jsx)("div",{className:y().subItemsContainer,children:null==(t=i.subItems)?void 0:t.map(e=>(0,s.jsx)(R,{item:e,isSubItem:!0,onLinkClick:r},e.label))})})]}):u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.N,{onClick:p,className:"".concat(y().navControl," ").concat(d()||h?y().activeParent:""),children:k}),(0,s.jsx)(E.S,{in:h,transitionDuration:200,children:(0,s.jsx)("div",{className:y().subItemsContainer,children:null==(n=i.subItems)?void 0:n.map(e=>(0,s.jsx)(R,{item:e,isSubItem:!0,onLinkClick:r},e.label))})})]}):(0,s.jsx)(w.N,{className:y().navLink,disabled:!0,children:k})}function D(e){let{children:t}=e,[n,{toggle:i}]=(0,m.j)(!1),a=(0,p.n)(e=>e.user),u=(0,p.n)(e=>e.logout);return(0,s.jsxs)(r.G,{padding:"md",header:{height:60},navbar:{width:{base:"100%",sm:260,lg:280},breakpoint:"sm",collapsed:{mobile:!n,desktop:!1}},children:[(0,s.jsx)(r.G.Header,{children:(0,s.jsxs)(l.Y,{h:"100%",px:"md",children:[(0,s.jsx)(o.w,{opened:n,onClick:i,hiddenFrom:"sm",size:"sm"}),(0,s.jsxs)(l.Y,{justify:"space-between",style:{flex:1},children:[(0,s.jsx)(g(),{href:"/admin/dashboard",style:{textDecoration:"none",color:"inherit"},children:(0,s.jsxs)(c.E,{size:"lg",fw:700,children:["JN COURIER"," ",(0,s.jsx)("span",{style:{fontWeight:400,fontSize:"0.8em"},children:"Admin"})]})}),(0,s.jsxs)(l.Y,{gap:"xs",children:[a&&(0,s.jsxs)(c.E,{size:"sm",c:"dimmed",mr:"md",children:[a.name||a.email," (",a.role,")"]}),(0,s.jsx)(f,{}),a&&(0,s.jsx)(d.$,{onClick:()=>{u()},variant:"light",color:"red",size:"xs",leftSection:(0,s.jsx)(j.A,{size:16,stroke:1.5}),children:"Salir"})]})]})]})}),(0,s.jsx)(r.G.Navbar,{p:"md",children:(0,s.jsx)(r.G.Section,{grow:!0,component:h.F,mx:"-md",px:"md",scrollbarSize:8,type:"hover",children:I.map(e=>(0,s.jsx)(R,{item:e,onLinkClick:()=>{n&&i()}},e.label))})}),(0,s.jsx)(r.G.Main,{children:t})]})}new i.E({defaultOptions:{queries:{staleTime:3e5,refetchOnWindowFocus:!1}}});let F=new i.E({defaultOptions:{queries:{staleTime:2e4,refetchOnWindowFocus:!1}}});function G(e){let{children:t}=e,n=(0,p.n)(e=>e.isAuthenticated),i=(0,p.n)(e=>e.user),r=(0,p.n)(e=>e.isLoading),l=(0,N.useRouter)();return((0,C.useEffect)(()=>{r||n&&(null==i?void 0:i.role)==="ADMINISTRATOR"||l.replace("/admin/login")},[n,i,r,l]),r)?(0,s.jsx)("div",{children:"Cargando sesi\xf3n..."}):n&&(null==i?void 0:i.role)==="ADMINISTRATOR"?(0,s.jsx)(a.Ht,{client:F,children:(0,s.jsx)(D,{children:t})}):null}},5018:e=>{e.exports={navLink:"AppNavItem_navLink__cuihq",navControl:"AppNavItem_navControl__urZGd",active:"AppNavItem_active__VRn3q",activeParent:"AppNavItem_activeParent__1SOmS",linkContent:"AppNavItem_linkContent__N9LcE",linkLabel:"AppNavItem_linkLabel__CsfZ_","mantine-ThemeIcon-root":"AppNavItem_mantine-ThemeIcon-root__ATEb6",chevron:"AppNavItem_chevron__K59ag","mantine-Collapse-root":"AppNavItem_mantine-Collapse-root__DlKvU",subItemsContainer:"AppNavItem_subItemsContainer__TK1EX",subItem:"AppNavItem_subItem__F8ERr"}},9018:(e,t,n)=>{"use strict";n.d(t,{n:()=>a});var s=n(5453),i=n(6786);let a=(0,s.v)()((0,i.Zr)((e,t)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,theme:"light",setUser:(t,n)=>{console.log("AuthStore: Setting user and token",{user:t,token:n}),e({user:t,token:n,isAuthenticated:!!t&&!!n,isLoading:!1,error:null})},logout:()=>{console.log("AuthStore: Logging out"),e({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null})},setCountryOfOrigin:t=>{e(e=>({user:e.user?{...e.user,countryOfOrigin:t}:null}))},setLoading:t=>e({isLoading:t}),setError:t=>e({isLoading:!1,error:t}),hydrateAuth:(t,n)=>{t&&n?(console.log("AuthStore: Hydrating auth state",{initialUser:t,initialToken:n}),e({user:t,token:n,isAuthenticated:!0,isLoading:!1,error:null})):e({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null})},setTheme:t=>{console.log("AuthStore: Setting theme to",t),e({theme:t})},toggleTheme:()=>{let n,s=t().theme;console.log("AuthStore: Toggling theme to",n="light"===s?"dark":"dark"===s||window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"light":"dark"),e({theme:n})}}),{name:"pwa-auth-storage",storage:(0,i.KU)(()=>localStorage),partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated,theme:e.theme}),onRehydrateStorage:()=>e=>{console.log("AuthStore: State rehydrated from localStorage. Theme:",null==e?void 0:e.theme),e&&(e.isLoading=!1)}}))},9849:(e,t,n)=>{Promise.resolve().then(n.bind(n,309))}},e=>{var t=t=>e(e.s=t);e.O(0,[149,545,438,660,877,219,811,182,871,441,684,358],()=>t(9849)),_N_E=e.O()}]);