(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[695],{2990:(t,e,i)=>{"use strict";i.d(e,{H:()=>b});var s=i(5155),r=i(7287),a=i(8593),n=i(737),u=i(112),o=i(7683),l=i(9260),c=i(6707),h=i(1659),d=i(9161),p=i(1153),f=i(2115),m=i(9840),y=i.n(m);let g=p.z.object({name:p.z.string().min(3,{message:"Nombre debe tener al menos 3 caracteres"}),description:p.z.string().nullable().optional(),creditAmount:p.z.number().min(1,{message:"Cantidad de cr\xe9ditos debe ser al menos 1"}).int(),isActive:p.z.boolean()});function b(t){let{initialData:e,onSubmit:i,isSaving:p,onCancel:m}=t,b=(0,h.m)({initialValues:e?{name:e.name,description:e.description||null,creditAmount:e.creditAmount,price:e.price,isActive:e.isActive}:{name:"",description:null,creditAmount:1,price:0,isActive:!0},validate:(0,d.u)(g)});return(0,f.useEffect)(()=>{e&&b.setValues({name:e.name,description:e.description||null,creditAmount:e.creditAmount,price:e.price,isActive:e.isActive})},[e]),(0,s.jsx)(r.t,{withBorder:!0,shadow:"sm",p:"lg",radius:"md",className:y().formPaper,children:(0,s.jsxs)("form",{onSubmit:b.onSubmit(t=>i(t)),children:[(0,s.jsx)(a.k,{label:"Nombre del Paquete",placeholder:"Ej: Paquete B\xe1sico 10",required:!0,...b.getInputProps("name"),mb:"md"}),(0,s.jsx)(n.T,{label:"Descripci\xf3n (Opcional)",placeholder:"Detalles sobre el paquete...",...b.getInputProps("description"),minRows:2,autosize:!0,mb:"md"}),(0,s.jsxs)(u.Y,{grow:!0,mb:"md",children:[(0,s.jsx)(o.Q,{label:"Cantidad de Cr\xe9ditos",placeholder:"Ej: 10",required:!0,min:1,step:1,...b.getInputProps("creditAmount")}),(0,s.jsx)(o.Q,{label:"Precio (PEN)",placeholder:"Ej: 50.00",required:!0,min:.01,step:.01,...b.getInputProps("price"),leftSection:"S/"})]}),(0,s.jsx)(l.S,{label:"Paquete Activo",...b.getInputProps("isActive",{type:"checkbox"}),mt:"md",mb:"xl"}),(0,s.jsxs)(u.Y,{justify:"flex-end",mt:"lg",children:[(0,s.jsx)(c.$,{variant:"default",onClick:m,disabled:p,children:"Cancelar"}),(0,s.jsx)(c.$,{type:"submit",loading:p,disabled:!b.isDirty()&&!p,children:e?"Actualizar Paquete":"Crear Paquete"})]})]})})}},4419:(t,e,i)=>{Promise.resolve().then(i.bind(i,5629))},5041:(t,e,i)=>{"use strict";i.d(e,{n:()=>c});var s=i(2115),r=i(4560),a=i(7165),n=i(5910),u=i(2020),o=class extends n.Q{#t;#e=void 0;#i;#s;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,u.f8)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#i,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,u.EN)(e.mutationKey)!==(0,u.EN)(this.options.mutationKey)?this.reset():this.#i?.state.status==="pending"&&this.#i.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#i?.removeObserver(this)}onMutationUpdate(t){this.#r(),this.#a(t)}getCurrentResult(){return this.#e}reset(){this.#i?.removeObserver(this),this.#i=void 0,this.#r(),this.#a()}mutate(t,e){return this.#s=e,this.#i?.removeObserver(this),this.#i=this.#t.getMutationCache().build(this.#t,this.options),this.#i.addObserver(this),this.#i.execute(t)}#r(){let t=this.#i?.state??(0,r.$)();this.#e={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#a(t){a.jG.batch(()=>{if(this.#s&&this.hasListeners()){let e=this.#e.variables,i=this.#e.context;t?.type==="success"?(this.#s.onSuccess?.(t.data,e,i),this.#s.onSettled?.(t.data,null,e,i)):t?.type==="error"&&(this.#s.onError?.(t.error,e,i),this.#s.onSettled?.(void 0,t.error,e,i))}this.listeners.forEach(t=>{t(this.#e)})})}},l=i(6715);function c(t,e){let i=(0,l.jE)(e),[r]=s.useState(()=>new o(i,t));s.useEffect(()=>{r.setOptions(t)},[r,t]);let n=s.useSyncExternalStore(s.useCallback(t=>r.subscribe(a.jG.batchCalls(t)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),c=s.useCallback((t,e)=>{r.mutate(t,e).catch(u.lQ)},[r]);if(n.error&&(0,u.GU)(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:c,mutateAsync:n.mutate}}},5629:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>g});var s=i(5155),r=i(8104),a=i(112),n=i(3751),u=i(6707),o=i(5647),l=i(5695),c=i(7017),h=i(6715),d=i(5041),p=i(6942),f=i(2990),m=i(7651);let y=new c.E;function g(){return(0,s.jsx)(h.Ht,{client:y,children:(0,s.jsx)(b,{})})}function b(){let t=(0,l.useRouter)(),e=(0,h.jE)(),{mutateAsync:i}=(0,d.n)({mutationFn:m.d.createCreditPackage,onSuccess:i=>{p.$e.show({title:"Paquete Creado",message:'El paquete "'.concat(i.name,'" ha sido creado exitosamente.'),color:"green"}),e.invalidateQueries({queryKey:["credit-packages"]}),t.push("/admin/credit-packages")},onError:t=>{}}),c=async t=>{await i({...t})};return(0,s.jsxs)(r.a,{p:"lg",children:[(0,s.jsxs)(a.Y,{justify:"space-between",mb:"xl",children:[(0,s.jsx)(n.h,{order:3,children:"Crear Nuevo Paquete de Cr\xe9dito"}),(0,s.jsx)(u.$,{component:"a",href:"/admin/credit-packages",variant:"default",leftSection:(0,s.jsx)(o.A,{size:16}),children:"Volver a la Lista"})]}),(0,s.jsx)(f.H,{onSubmit:c,isSaving:!1,onCancel:()=>t.push("/admin/credit-packages")})]})}},6942:(t,e,i)=>{"use strict";i.d(e,{_b:()=>o,$e:()=>l,__:()=>a,E$:()=>n});var s=i(4275),r=i(2115);let a=function(t){let e=t,i=!1,s=new Set;return{getState:()=>e,updateState(t){e="function"==typeof t?t(e):t},setState(t){this.updateState(t),s.forEach(t=>t(e))},initialize(t){i||(e=t,i=!0)},subscribe:t=>(s.add(t),()=>s.delete(t))}}({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),n=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;return(0,r.useSyncExternalStore)(t.subscribe,()=>t.getState(),()=>t.getState())};function u(t,e){let i=t.getState(),s=function(t,e,i){let s=[],r=[],a={};for(let n of t){let t=n.position||e;a[t]=a[t]||0,a[t]+=1,a[t]<=i?r.push(n):s.push(n)}return{notifications:r,queue:s}}(e([...i.notifications,...i.queue]),i.defaultPosition,i.limit);t.setState({notifications:s.notifications,queue:s.queue,limit:i.limit,defaultPosition:i.defaultPosition})}function o(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return u(e,e=>e.filter(e=>{if(e.id===t){var i;return null==(i=e.onClose)||i.call(e,e),!1}return!0})),t}let l={show:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,i=t.id||(0,s.z)();return u(e,e=>t.id&&e.some(e=>e.id===t.id)?e:[...e,{...t,id:i}]),i},hide:o,update:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return u(e,e=>e.map(e=>e.id===t.id?{...e,...t}:e)),t.id},clean:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;u(t,()=>[])},cleanQueue:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;u(t,e=>e.slice(0,t.getState().limit))},updateState:u}},7017:(t,e,i)=>{"use strict";i.d(e,{E:()=>m});var s=i(2020),r=i(9853),a=i(7165),n=i(5910),u=class extends n.Q{constructor(t={}){super(),this.config=t,this.#n=new Map}#n;build(t,e,i){let a=e.queryKey,n=e.queryHash??(0,s.F$)(a,e),u=this.get(n);return u||(u=new r.X({client:t,queryKey:a,queryHash:n,options:t.defaultQueryOptions(e),state:i,defaultOptions:t.getQueryDefaults(a)}),this.add(u)),u}add(t){this.#n.has(t.queryHash)||(this.#n.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){let e=this.#n.get(t.queryHash);e&&(t.destroy(),e===t&&this.#n.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){a.jG.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#n.get(t)}getAll(){return[...this.#n.values()]}find(t){let e={exact:!0,...t};return this.getAll().find(t=>(0,s.MK)(e,t))}findAll(t={}){let e=this.getAll();return Object.keys(t).length>0?e.filter(e=>(0,s.MK)(t,e)):e}notify(t){a.jG.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){a.jG.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){a.jG.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},o=i(4560),l=class extends n.Q{constructor(t={}){super(),this.config=t,this.#u=new Set,this.#o=new Map,this.#l=0}#u;#o;#l;build(t,e,i){let s=new o.s({mutationCache:this,mutationId:++this.#l,options:t.defaultMutationOptions(e),state:i});return this.add(s),s}add(t){this.#u.add(t);let e=c(t);if("string"==typeof e){let i=this.#o.get(e);i?i.push(t):this.#o.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#u.delete(t)){let e=c(t);if("string"==typeof e){let i=this.#o.get(e);if(i)if(i.length>1){let e=i.indexOf(t);-1!==e&&i.splice(e,1)}else i[0]===t&&this.#o.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){let e=c(t);if("string"!=typeof e)return!0;{let i=this.#o.get(e),s=i?.find(t=>"pending"===t.state.status);return!s||s===t}}runNext(t){let e=c(t);if("string"!=typeof e)return Promise.resolve();{let i=this.#o.get(e)?.find(e=>e!==t&&e.state.isPaused);return i?.continue()??Promise.resolve()}}clear(){a.jG.batch(()=>{this.#u.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#u.clear(),this.#o.clear()})}getAll(){return Array.from(this.#u)}find(t){let e={exact:!0,...t};return this.getAll().find(t=>(0,s.nJ)(e,t))}findAll(t={}){return this.getAll().filter(e=>(0,s.nJ)(t,e))}notify(t){a.jG.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){let t=this.getAll().filter(t=>t.state.isPaused);return a.jG.batch(()=>Promise.all(t.map(t=>t.continue().catch(s.lQ))))}};function c(t){return t.options.scope?.id}var h=i(920),d=i(1239);function p(t){return{onFetch:(e,i)=>{let r=e.options,a=e.fetchOptions?.meta?.fetchMore?.direction,n=e.state.data?.pages||[],u=e.state.data?.pageParams||[],o={pages:[],pageParams:[]},l=0,c=async()=>{let i=!1,c=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(e.signal.aborted?i=!0:e.signal.addEventListener("abort",()=>{i=!0}),e.signal)})},h=(0,s.ZM)(e.options,e.fetchOptions),d=async(t,r,a)=>{if(i)return Promise.reject();if(null==r&&t.pages.length)return Promise.resolve(t);let n=(()=>{let t={client:e.client,queryKey:e.queryKey,pageParam:r,direction:a?"backward":"forward",meta:e.options.meta};return c(t),t})(),u=await h(n),{maxPages:o}=e.options,l=a?s.ZZ:s.y9;return{pages:l(t.pages,u,o),pageParams:l(t.pageParams,r,o)}};if(a&&n.length){let t="backward"===a,e={pages:n,pageParams:u},i=(t?function(t,{pages:e,pageParams:i}){return e.length>0?t.getPreviousPageParam?.(e[0],e,i[0],i):void 0}:f)(r,e);o=await d(e,i,t)}else{let e=t??n.length;do{let t=0===l?u[0]??r.initialPageParam:f(r,o);if(l>0&&null==t)break;o=await d(o,t),l++}while(l<e)}return o};e.options.persister?e.fetchFn=()=>e.options.persister?.(c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},i):e.fetchFn=c}}}function f(t,{pages:e,pageParams:i}){let s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,i[s],i):void 0}var m=class{#c;#h;#d;#p;#f;#m;#y;#g;constructor(t={}){this.#c=t.queryCache||new u,this.#h=t.mutationCache||new l,this.#d=t.defaultOptions||{},this.#p=new Map,this.#f=new Map,this.#m=0}mount(){this.#m++,1===this.#m&&(this.#y=h.m.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#c.onFocus())}),this.#g=d.t.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#c.onOnline())}))}unmount(){this.#m--,0===this.#m&&(this.#y?.(),this.#y=void 0,this.#g?.(),this.#g=void 0)}isFetching(t){return this.#c.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#h.findAll({...t,status:"pending"}).length}getQueryData(t){let e=this.defaultQueryOptions({queryKey:t});return this.#c.get(e.queryHash)?.state.data}ensureQueryData(t){let e=this.defaultQueryOptions(t),i=this.#c.build(this,e),r=i.state.data;return void 0===r?this.fetchQuery(t):(t.revalidateIfStale&&i.isStaleByTime((0,s.d2)(e.staleTime,i))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#c.findAll(t).map(({queryKey:t,state:e})=>[t,e.data])}setQueryData(t,e,i){let r=this.defaultQueryOptions({queryKey:t}),a=this.#c.get(r.queryHash),n=a?.state.data,u=(0,s.Zw)(e,n);if(void 0!==u)return this.#c.build(this,r).setData(u,{...i,manual:!0})}setQueriesData(t,e,i){return a.jG.batch(()=>this.#c.findAll(t).map(({queryKey:t})=>[t,this.setQueryData(t,e,i)]))}getQueryState(t){let e=this.defaultQueryOptions({queryKey:t});return this.#c.get(e.queryHash)?.state}removeQueries(t){let e=this.#c;a.jG.batch(()=>{e.findAll(t).forEach(t=>{e.remove(t)})})}resetQueries(t,e){let i=this.#c;return a.jG.batch(()=>(i.findAll(t).forEach(t=>{t.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){let i={revert:!0,...e};return Promise.all(a.jG.batch(()=>this.#c.findAll(t).map(t=>t.cancel(i)))).then(s.lQ).catch(s.lQ)}invalidateQueries(t,e={}){return a.jG.batch(()=>(this.#c.findAll(t).forEach(t=>{t.invalidate()}),t?.refetchType==="none")?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e))}refetchQueries(t,e={}){let i={...e,cancelRefetch:e.cancelRefetch??!0};return Promise.all(a.jG.batch(()=>this.#c.findAll(t).filter(t=>!t.isDisabled()&&!t.isStatic()).map(t=>{let e=t.fetch(void 0,i);return i.throwOnError||(e=e.catch(s.lQ)),"paused"===t.state.fetchStatus?Promise.resolve():e}))).then(s.lQ)}fetchQuery(t){let e=this.defaultQueryOptions(t);void 0===e.retry&&(e.retry=!1);let i=this.#c.build(this,e);return i.isStaleByTime((0,s.d2)(e.staleTime,i))?i.fetch(e):Promise.resolve(i.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(s.lQ).catch(s.lQ)}fetchInfiniteQuery(t){return t.behavior=p(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(s.lQ).catch(s.lQ)}ensureInfiniteQueryData(t){return t.behavior=p(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return d.t.isOnline()?this.#h.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#c}getMutationCache(){return this.#h}getDefaultOptions(){return this.#d}setDefaultOptions(t){this.#d=t}setQueryDefaults(t,e){this.#p.set((0,s.EN)(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){let e=[...this.#p.values()],i={};return e.forEach(e=>{(0,s.Cp)(t,e.queryKey)&&Object.assign(i,e.defaultOptions)}),i}setMutationDefaults(t,e){this.#f.set((0,s.EN)(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){let e=[...this.#f.values()],i={};return e.forEach(e=>{(0,s.Cp)(t,e.mutationKey)&&Object.assign(i,e.defaultOptions)}),i}defaultQueryOptions(t){if(t._defaulted)return t;let e={...this.#d.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=(0,s.F$)(e.queryKey,e)),void 0===e.refetchOnReconnect&&(e.refetchOnReconnect="always"!==e.networkMode),void 0===e.throwOnError&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===s.hT&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#d.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#c.clear(),this.#h.clear()}}},7651:(t,e,i)=>{"use strict";i.d(e,{d:()=>r});var s=i(2956);let r={getCreditPackages:async()=>(await s.u.get("/credit-packages")).data,getCreditPackageById:async t=>(await s.u.get("/credit-packages/".concat(t))).data,createCreditPackage:async t=>(await s.u.post("/credit-packages",t)).data,updateCreditPackage:async(t,e)=>(await s.u.patch("/credit-packages/".concat(t),e)).data,async deleteCreditPackage(t){await s.u.delete("/credit-packages/".concat(t))}}},9840:t=>{t.exports={formPaper:"CreditPackageFormComponent_formPaper__GaREb"}}},t=>{var e=e=>t(t.s=e);t.O(0,[967,438,660,877,700,219,142,347,90,936,622,441,684,358],()=>e(4419)),_N_E=t.O()}]);